---
import '@/styles/colors.css';
import '@/styles/index.css';
import '@/styles/prose.css';

import { Code } from 'astro:components';
import { Font } from 'astro:assets';

import { badges, type BadgeName } from 'astro-webrings/badges';
import { badgeImages } from '@/util/badge-images';
import { Image } from 'astro:assets';
import OpenGraphImage from '@/assets/og.png';

const webringEntryExample = `{
  "name": "Example Site",
  "id": "a-unique-slug",
  "url": "https://example.com"
}`;

const installCode = `# npm
npm install astro-webrings

# pnpm
pnpm add astro-webrings

# yarn
yarn add astro-webrings`;

const componentCode = `${"---"}
import WebringBadge from "astro-webrings/badge";
${"---"}
<WebringBadge site="example.com" ring="friends-of-houston" />
`;

const componentCodeAnimated = `<WebringBadge site="example.com" ring="friends-of-houston" animated />`;

const componentCodeImageOverride = `${"---"}
import WebringBadge from "astro-webrings/badge";
import MyCustomBadge from "./my-custom-badge.png";
${"---"}
<WebringBadge site="example.com" ring="friends-of-houston" imageOverride={MyCustomBadge} />
<WebringBadge site="example.com" ring="friends-of-houston" imageOverride={"/path/inside/public/to/my-custom-badge.png"} />
<WebringBadge site="example.com" ring="friends-of-houston" imageOverride={"https://example.com/my-custom-badge.png"} />`;
---

<html lang="en">
	<head>
		<Font cssVariable='--font-inter' preload />
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		<meta name="description" content="Webrings for Astro, the JS Framework!" />
		<meta name="theme-color" content="#eb2d84" />
		<meta property="og:title" content="ðŸ›Ÿ Astro Webrings" />
		<meta property="og:description" content="Webrings for Astro, the JS Framework!" />
		<meta property="og:image" content="/og.png" />
		<meta property="og:type" content="website" />
		<meta property="og:locale" content="en" />
		<meta name="twitter:card" content="summary_large_image">
		<meta name="twitter:title" content="ðŸ›Ÿ Astro Webrings">
		<meta property="twitter:description" content="Webrings for Astro, the JS Framework!" />
		<meta name="twitter:image" content="/og.png">
		<title>Astro Webrings</title>
	</head>
	<body>
		<div class="prose card">
			<Image src={OpenGraphImage} loading="eager" class="top-image" quality={100} width={660} height={347} alt='A buoy besides the text "Astro Webrings" in big, white letters, with some pink decoration in the corners.' />
			<h1>ðŸ›Ÿ Astro Webrings</h1>
			<p>Add your site to an Astro webring!</p>
			<h2>What is this?</h2>
			<p>
				A webring, <a href="https://en.wikipedia.org/wiki/Webring">according to Wikipedia</a>,
				is a collection of websites linked together in a circular structure, usually organized
				around a specific theme, and often educational or social. This one is about <a href="https://astro.build">Astro</a>!
			</p>
			<h2 id="how-do-i-join">Great! How do I join?</h2>
			<p>
				Start by making a pull request on the
				<a href="https://github.com/louisescher/astro-webrings"><code>astro-webrings</code> repository</a>
				to add your site. You will need to create a file in the <code>packages/web/src/content/rings/RING_YOU_WANT_TO_JOIN</code> directory,
				preferrably using the origin of your site as the filename: <code>example.com.json</code>
			</p>
			<p>
				Inside of this file, place the following information:
			</p>
			<Code code={webringEntryExample} lang="json" />
			<p>
				The <code>name</code> can be anything you want it to be. The <code>slug</code> should be a unique identifier for your
				site and should only contain lowercase letters from a-z, numbers, dots, hyphens and underscores. The <code>url</code>
				should be the URL to your site! This is where people will get linked to.
			</p>
			<p>
				Once your pull request is approved and merged, you can install the
				<a href="https://www.npmjs.com/package/astro-webrings"><code>astro-webrings</code></a> package, which allows you to add a
				badge for the ring to your site. Start by installing the package from the NPM:
			</p>
			<Code code={installCode} lang="bash" />
			<p>After installing, you can import and use the badge like this:</p>
			<Code code={componentCode} lang="astro" />
			<p>Remember to swap out the <code>site</code> and <code>id</code> props to the <code>slug</code> you chose when submitting your PR, and the `ring` you want to link to.</p>
			<p>Additionally, if there is an animated image for the ring you want to link to, you can use the `animated` prop:</p>
			<Code code={componentCodeAnimated} lang="astro" />
			<p>That's it! Welcome on the ring.</p>
			<h3>Overriding the Image</h3>
			<p>If you want to use a different image, you can use the <code>imageOverride</code> prop on the component to pass in either the URL of an image (local or remote) or an imported <code>ImageMetadata</code> object:</p>
			<Code code={componentCodeImageOverride} lang="astro" />
			<h2 id="available-webrings">Available Webrings</h2>
			<p>Here's a list of all available Webrings you can join right now by making a PR:</p>
			<table>
				<thead>
					<tr>
						<th>
							Ringname
						</th>
						<th>
							Slug
						</th>
						<th>
							Badge(s)
						</th>
					</tr>
				</thead>
				<tbody>
					{Object.keys(badges).map(async (key) => {
						const badge = badges[key as BadgeName];

						const staticImage = badgeImages[key as BadgeName].static;
						const animatedImage = badgeImages[key as BadgeName].animated;

						return (
							<tr>
								<td>{badge.name}</td>
								<td><code>{key}</code></td>
								<td class="not-prose">
									<div class="badge-images">
										<Image src={staticImage} alt={badge.name} width={88} height={31} />
										{animatedImage && (
											<Image src={animatedImage} alt={badge.name} width={88} height={31} />
										)}
									</div>
								</td>
							</tr>
						)
					})}
				</tbody>
			</table>
		</div>
	</body>
</html>
